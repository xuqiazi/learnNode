# 正则匹配 URL 思路

合法链接：

```
http://qq.com/abc/sss
https://cc.com?bbb=123
https://v.qq.com/
http://127.0.0.1:3000/edit
https://en.wikipedia.org/wiki/Main_Page
```

不合法链接

```
httpssss://asdasdasd.com/
file://abc.com
http://127.0.0.1:3000:3000/edit
http://abc.com?abc=111?abc=111
http://abc.com=111
```

## 1,观察链接的规则，首先为匹配协议头，分别为 http:// 和 https//:

```
/^http(s)?:\/\/$/gi
```

^ 表示从该字符串开始匹配
？表示非贪婪模式匹配即【0，1】
\$ 表示匹配字符串的结尾位置
i 表示 大小写不敏感
g 表示全局匹配

### 2,观察链接的形式为域名或者 IP 地址，以下为域名的正则匹配,域名需要根据实际需求进行匹配

```
/^[(a-z)|\d+.]{1,}(com|cn|org|net)$/gi
```

### 3，以下为 IP 地址的正则匹配

匹配范围为【0.0.0.0-255.255.255.255】

可以拆解为 匹配【0-255+.】三次+1 次【0-255】

```
/^((2[0-5][0-5]|1\d{2}|[1-9]\d|\d)\.){3}(2[0-5][0-5]|1\d{2}|[1-9]\d|\d)$/g
```

### 4,端口号匹配端口号为 0-65535

```
/^(6553[0-5]|655[0-2]\d|65[0-4]\d{2}|6[0-4]\d{3}|[0-5]\d{4}|\d{4})$/g
```

### 5,简化域名、IP 地址以及端口匹配，由于不同的域名以及 IP 地址匹配太过庞大，实际运用中应当按照实际需求为主。

简化为：

```
^https?\:\/\/(([a-z]|\d)+\.)+([a-z]|\d)+$
```

`？` 代表【0,1】非贪婪模式匹配
`+`  代表【1,] 贪婪模式匹配 1 次到 N 次数
`*`  代表【0,】贪婪模式匹配 0 到 N 次

### 6,url 文件部分以及？=部分

全部加上为：

```
/^https?\:\/\/(([a-z]|\d)+\.)+([a-z]|\d)+(\:\d{1,5})?(\/\w*)*(\?\w+(\=\w*)?)?$/
```

观察链接，分为子文件部分以及？=部分，？以及=部分可能存在，也可能不存在，但是有=部分的话前面一定有？部分，否则为不合法。
