# 博客的登录

## 调整数据结构

在lesson03的基础上增加登录、注册的功能。第一步需调整原有的数据结构，增加账户ID，并在文档的json里面添加上每个文档所对应的账户ID

在定义好json后，便可通过lesson03写好的路由，非常方便的新定义login的路由规则，以及controller。

## 增加登录态中间件

按照正常网站的登录态，在进入首页的时候，如果已登录，上面会显示已登录，若未登录会有登录的按钮进行登录操作。

现先按照本教程来，现思路为，所有请求先进入登录态中间件进行拦截处理，若未登录显示登录页，已登录回到首页。

## 如何判断登录态

需要通过浏览器cookie来进行判断。cookie的配置由服务器端来定。 

若通过cookie来判断的话，那就需要写一个函数在请求中获取cookie的key和value值。

我们随便打开一个网站的cookie可以观察得到，cookie的key和value 的属性，从而得到相应的正则匹配规则

## 重定向

当请求进来我们发现该url不是login的话，需要让它重定向到login中

## 登录校验

1，用户输入账户密码后，点击登录会通过post请求提交x-www-form-urlencoded的账户密码请求到客户端

2，客户端拿到后通过处理，进行登录校验

3，通常判断账户密码是否正确的逻辑为，先判断用户是否存在，然后再判断密码是否与存储好的数据库里一致

4，登录成功后，为了让浏览别的页面不需要重新登录，需要在cookie里面生成新的sessionId，用来保存用户的登录信息

5，同时将新的sessionId 种到cookie 中

## 注册逻辑

1，增加路由规则，增加注册逻辑，并在accountHandle 里面做注册处理

2，